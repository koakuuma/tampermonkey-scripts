# ASMR音频声道切换

## 功能介绍

在ASMR网站（如 asmr.one）上添加音频声道切换功能，支持多种声道模式。

## 使用场景

- 某些ASMR作品的左右声道可能与你的耳机佩戴方向相反
- 想要体验不同的声场效果
- 需要单独听某一个声道的内容
- 快速切换声道模式来找到最佳听感

## 功能特点

- ✅ 自动检测页面中的音频播放
- ✅ 嵌入式下拉选择器，与播放器完美融合
- ✅ 支持四种声道模式切换
- ✅ 实时生效，无需重新加载
- ✅ 同时支持PC端和移动端
- ✅ 清晰的图标和颜色指示

## 声道模式

1. **🔊 正常声道**（绿色）- 左右声道正常输出
2. **🔄 反转声道**（红色）- 左右声道互换
3. **◀️ 仅左声道**（蓝色）- 只输出左声道到两边
4. **▶️ 仅右声道**（橙色）- 只输出右声道到两边

## 使用方法

1. 安装此脚本到 Tampermonkey
2. 访问 ASMR 网站（如 https://www.asmr.one/work/RJ01476608）
3. 播放音频后，播放器控制栏会出现声道切换按钮（带下拉箭头）
4. 点击按钮打开下拉菜单
5. 选择需要的声道模式
6. 图标颜色会根据当前模式变化

## 技术实现

使用 Web Audio API 实现音频声道处理：

- **AudioContext**: 创建音频处理上下文
- **MediaElementAudioSourceNode**: 从 `<audio>` 元素创建音频源
- **ChannelSplitterNode**: 将立体声分离为左右声道
- **ChannelMergerNode**: 将左右声道重新合并

### 声道处理流程

```
正常模式：
音频源 -> 分离器 -> 左声道 -> 左输出
                 -> 右声道 -> 右输出

反转模式：
音频源 -> 分离器 -> 左声道 -> 右输出
                 -> 右声道 -> 左输出

仅左声道：
音频源 -> 分离器 -> 左声道 -> 左输出
                 -> 左声道 -> 右输出

仅右声道：
音频源 -> 分离器 -> 右声道 -> 左输出
                 -> 右声道 -> 右输出
```

## 支持的网站

- https://www.asmr.one/work/*

## 注意事项

- 脚本会自动检测音频播放，无需手动操作
- 切换声道是实时的，不会影响音频播放进度
- 支持同一页面多个音频元素
- 下拉菜单会自动嵌入到播放器控制栏中

## 兼容性

- 支持所有现代浏览器（Chrome、Firefox、Edge、Safari 等）
- 需要浏览器支持 Web Audio API
- 同时支持PC端和移动端页面

## 版本历史

### v1.0 (2024-12-11)
- 初始版本
- 实现基础的声道反转功能
- 添加自动检测和按钮显示
- 优化用户界面

### v2.0 (2024-12-11)
- 新增四种声道模式（正常、反转、仅左、仅右）
- 改为下拉选择器界面
- 添加颜色指示
- 支持PC端和移动端

## 许可证

MIT License

## 作者

shangxueink

## 反馈

如有问题或建议，请在 [GitHub Issues](https://github.com/koakuuma/tampermonkey-scripts/issues) 中提出。
